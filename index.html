<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<title>Locker Schedule</title>

<style>
:root{
 --safe-top: env(safe-area-inset-top);
 --safe-bottom: env(safe-area-inset-bottom);
}
body{
 margin:0;
 font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display","SF Pro Text",Helvetica,Arial,sans-serif;
 background:#f2f2f7;
 height:100vh;
 overflow:hidden;
}
.header {
  padding: calc(20px + env(safe-area-inset-top)) 16px 12px;
  background: linear-gradient(180deg,#0a3a78,#0f62c8);
  color:white;
  text-align:center;
  flex-shrink:0;  /* prevent shrinking */
}

.container {
  padding:16px;
  overflow-y:auto;      /* allows scrolling */
  display:flex;
  flex-direction:column;
  gap:12px;             /* spacing between blocks */
}

.class {
  min-height:100px;     /* readable size */
  background:white;
  border-radius:16px;
  padding:14px;
  box-shadow:0 4px 14px rgba(0,0,0,.12);
  display:flex;
  flex-direction:column;
  justify-content:center;
}

.class:last-child {
  margin-bottom:0; /* remove extra space after last block */
}
.current{background:#eafff1;border-left-color:#34c759;}
.next{border-left-color:#0a84ff;}
.lunch{background:#fff3cd;border-left-color:#ffcc00;}

.time{color:#666;font-size:12px;}
.title{font-size:17px;font-weight:700;}
.room{color:#777;font-size:13px;}
</style>
</head>

<body>

<div class="header">
 <div class="date" id="date"></div>
 <div class="clock" id="clock"></div>
 <div class="week" id="week"></div>
</div>

<div class="container" id="schedule"></div>

<script>
// 12-hour clock (old iOS safe)
function updateClock(){
 var n=new Date();
 var h=n.getHours();
 var m=n.getMinutes();
 var a=h>=12?"PM":"AM";
 h=h%12; if(h==0) h=12;
 if(m<10) m="0"+m;
 document.getElementById("clock").innerText=h+":"+m+" "+a;
}
setInterval(updateClock,1000);
updateClock();

// Today (skip weekends)
var today=new Date();
if(today.getDay()==6) today.setDate(today.getDate()+2);
if(today.getDay()==0) today.setDate(today.getDate()+1);

// Manual date formatting
var days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
var months=["January","February","March","April","May","June","July","August","September","October","November","December"];
document.getElementById("date").innerText=
 days[today.getDay()]+", "+months[today.getMonth()]+" "+today.getDate()+", "+today.getFullYear();

// Week calc
var week1Start=new Date(2026,0,5);
var diff=Math.floor((today-week1Start)/86400000);
var weekNum=(Math.floor(diff/7)%2==0)?1:2;
document.getElementById("week").innerText="Week "+weekNum;

// Time parser (iOS safe)
function parseTime(t){
 var p=t.split(" ");
 var hm=p[0].split(":");
 var h=parseInt(hm[0]);
 var m=parseInt(hm[1]);
 if(p[1]=="PM" && h!=12) h+=12;
 if(p[1]=="AM" && h==12) h=0;
 var d=new Date(today);
 d.setHours(h,m,0,0);
 return d;
}

// Schedules
var week1={
1:[["8:20 AM","9:20 AM","Core French 8","Room #4"],["9:20 AM","10:20 AM","Scheduling Need","Room #6"],["10:20 AM","11:20 AM","English Language Arts 8","Room #8"],["12:50 PM","1:50 PM","Mathematics 8","Room #6"],["1:50 PM","2:50 PM","Social Studies 8","Room #8"]],
2:[["8:20 AM","9:20 AM","Physical Education 8","Gym"],["9:20 AM","10:20 AM","English Language Arts 8","Room #8"],["10:20 AM","11:20 AM","Science 8","Room #6"],["12:50 PM","1:50 PM","Mathematics 8","Room #6"],["1:50 PM","2:50 PM","Band Instruments 8","Library"]],
3:[["8:20 AM","9:20 AM","English Language Arts 8","Room #8"],["9:20 AM","10:20 AM","Food & Nutrition 8","Room 15B"],["10:20 AM","11:20 AM","Core French 8","Room #4"],["12:50 PM","1:50 PM","Health Education 8","Room #8"],["1:50 PM","2:50 PM","Mathematics 8","Room #6"]],
4:[["8:20 AM","9:20 AM","Mathematics 8","Room #6"],["9:20 AM","10:20 AM","Core French 8","Room #4"],["10:20 AM","11:20 AM","English Language Arts 8","Room #8"],["12:50 PM","1:50 PM","Science 8","Room #6"],["1:50 PM","2:50 PM","Band Instruments 8","Library"]],
5:[["8:20 AM","9:20 AM","Social Studies 8","Room #8"],["9:20 AM","10:20 AM","Mathematics 8","Room #6"],["10:20 AM","11:20 AM","Physical Education 8","Gym"],["12:50 PM","1:50 PM","Science 8","Room #6"],["1:50 PM","2:50 PM","English Language Arts 8","Room #8"]]
};

var week2={
1:[["8:20 AM","9:20 AM","Mathematics 8","Room #6"],["9:20 AM","10:20 AM","Scheduling Need","Room #6"],["10:20 AM","11:20 AM","English Language Arts 8","Room #8"],["12:50 PM","1:50 PM","Physical Education 8","Gym"],["1:50 PM","2:50 PM","Band Instruments 8","Library"]],
2:[["8:20 AM","9:20 AM","Health Education 8","Room #8"],["9:20 AM","10:20 AM","Mathematics 8","Room #6"],["10:20 AM","11:20 AM","English Language Arts 8","Room #8"],["12:50 PM","1:50 PM","Science 8","Room #6"],["1:50 PM","2:50 PM","Technology Education 8","Room 15A"]],
3:[["8:20 AM","9:20 AM","Social Studies 8","Room #8"],["9:20 AM","10:20 AM","Core French 8","Room #4"],["10:20 AM","11:20 AM","Physical Education 8","Gym"],["12:50 PM","1:50 PM","Mathematics 8","Room #6"],["1:50 PM","2:50 PM","English Language Arts 8","Room #8"]],
4:[["8:20 AM","9:20 AM","Science 8","Room #6"],["9:20 AM","10:20 AM","English Language Arts 8","Room #8"],["10:20 AM","11:20 AM","Mathematics 8","Room #6"],["12:50 PM","1:50 PM","Core French 8","Room #4"],["1:50 PM","2:50 PM","Social Studies 8","Room #8"]],
5:[["8:20 AM","9:20 AM","Mathematics 8","Room #6"],["9:20 AM","10:20 AM","Health Education 8","Room #8"],["10:20 AM","11:20 AM","Physical Education 8","Gym"],["12:50 PM","1:50 PM","English Language Arts 8","Room #8"],["1:50 PM","2:50 PM","Social Studies 8","Room #8"]]
};

// Get today safely
var day=today.getDay();
if(day==0 || day==6) day=1;

var raw=(weekNum==1?week1:week2)[day];

// Add Lunch
var schedule=[];
raw.forEach(function(c){
 schedule.push(c);
 if(c[1]=="11:20 AM") schedule.push(["11:20 AM","12:50 PM","Lunch",""]);
});

// Render
var now=new Date();
var next=false;

schedule.forEach(function(c){
 var s=parseTime(c[0]);
 var e=parseTime(c[1]);
 var cls="class";
 if(c[2]=="Lunch") cls+=" lunch";
 if(now>=s && now<=e) cls+=" current";
 else if(now<s && !next){cls+=" next"; next=true;}

 document.getElementById("schedule").innerHTML+=
 '<div class="'+cls+'">'+
 '<div class="time">'+c[0]+' â€“ '+c[1]+'</div>'+
 '<div class="title">'+c[2]+'</div>'+
 '<div class="room">'+c[3]+'</div>'+
 '</div>';
});
</script>

</body>
</html>
